{% extends 'base.html.twig' %}

{% block title %}Statistics
{% endblock %}

{% block body %}

	<style>
		/*minscule style pas besoin d'un fichier pour ça */
		.container_chart {
			display: flex;
			justify-content: center;
		}

		.alert {
			margin-top: 100px;
			margin-bottom: 100px;
		}
	</style>

	{% if print %}
		<div class="container_chart" id="piechart">
			<input type="" id="pie" value='{{data|json_encode|raw}}' style="display:none">
		</div>
		<div class="container_chart" id="barchart">
			<input type="" id="stats" value='{{stats|json_encode|raw}}' style="display:none">
		</div>
	{% else %}
		<div class="alert alert-warning" role="alert">
			<h1 style="text-align:center;">You have no shopping lists yet</h1>
		</div>
	{% endif %}

	{% block javascripts %}
		<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
		<script>
			/*##############################################################################*/
var data = document.getElementById('pie');
data = data.value;
var data = JSON.parse(data);
var labelsPie = Object.keys(data);
var seriesPie = Object.values(data);
// on créer le diagramme en camembert
var options = {
series: seriesPie,
chart: {
width: 450,
type: 'donut'
},
labels: labelsPie,
responsive: [
{
breakpoint: 480,
options: {
chart: {
width: 200
},
legend: {
position: 'bottom'
}
}
}
]
};
// titre du diagramme
options.title = {
text: 'Types of article in your Lists',
align: 'center',
margin: 20,
offsetX: 0,
offsetY: 0,
floating: false,
style: {
fontSize: '20px',
fontWeight: 'bold',
fontFamily: undefined,
color: '#263238'
}
};

var chart = new ApexCharts(document.getElementById("piechart"), options);
chart.render();
		</script>

		<script>
			/* ################################################################################"*/
var stats = document.getElementById('stats');
stats = stats.value;
var stats = JSON.parse(stats);
console.log(stats)
var options = {
series: [
{
data: stats
}
],
chart: {
type: 'bar',
height: 240,
width: 1200

},
plotOptions: {
bar: {
borderRadius: 4,
horizontal: true
}
},
dataLabels: {
enabled: true
},
xaxis: {
categories: ["Lower price article", "Higher price article", "Average price list", "Total price list"]
}
};
// titre du diagramme
options.title = {
text: 'Statistics of your Lists',
align: 'center',
margin: 20,
offsetX: 0,
offsetY: 0,
floating: false,
style: {
fontSize: '20px',
fontWeight: 'bold',
fontFamily: undefined,
color: '#263238'
}
};

var chart = new ApexCharts(document.getElementById("barchart"), options);
chart.render();
		</script>

	{% endblock javascripts %}
{% endblock %}
